function getWeather(){document.getElementById("results").style.display="flex";const e="5a876642351109dd856659747d6bd117",t=document.getElementById("city").value;if(!t)return void alert("Please enter a city");const n=`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=${e}`;fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&units=metric&appid=${e}`).then((e=>e.json())).then((e=>{displayWeather(e),checkForAnomalies(e)})).catch((e=>{console.error("Error fetching current weather data:",e),alert("Error fetching current weather data. Please try again.")})),fetch(n).then((e=>e.json())).then((e=>{displayHourlyForecast(e.list)})).catch((e=>{console.error("Error fetching hourly forecast data:",e),alert("Error fetching hourly forecast data. Please try again.")}))}function displayWeather(e){const t=document.getElementById("temp-div"),n=document.getElementById("weather-info"),o=document.getElementById("weather-icon"),a=document.getElementById("hourly-forecast"),r=document.getElementById("cordinates");if(n.innerHTML="",a.innerHTML="",t.innerHTML="",r.innerHTML="","404"===e.cod)n.innerHTML=`<p>${e.message}</p>`;else{const a=e.name,i=Math.round(e.main.temp),s=e.weather[0].description,c=e.weather[0].icon,d=Math.round(e.coord.lon),l=Math.round(e.coord.lat),m=`https://openweathermap.org/img/wn/${c}@4x.png`;t.innerHTML=`<h2>${i}°C</h2>`,n.innerHTML=`\n            <h3>${a}</h3>\n            <p>${s.charAt(0).toUpperCase()+s.slice(1)}</p>\n           \n        `,r.innerHTML=`<p> H ${l} °C, L ${d} °C</p>`,o.src=m,o.alt=s,showImage()}}function displayHourlyForecast(e){const t=document.getElementById("hourly-forecast");t.innerHTML="";const n=document.createElement("h3");n.textContent="Forecast",n.classList.add("hourly-title"),t.appendChild(n);const o=document.createElement("div");o.classList.add("hourly-container");e.slice(0,8).forEach((e=>{const t=new Date(1e3*e.dt).getHours(),n=Math.round(e.main.temp),a=`\n            <div class="hourly-item fancy-box">\n                <span>${t}:00</span>\n                <img src="${`https://openweathermap.org/img/wn/${e.weather[0].icon}.png`}" alt="Hourly Weather Icon">\n                <span>${n}°C</span>\n            \n            </div>\n        `;o.innerHTML+=a})),t.appendChild(o)}function checkForAnomalies(e){let t=[];console.log("Checking for anomalies in data:",e);const n=e.main.temp,o=e.main.feels_like;n!==o&&t.push(`Feels Like: ${o}°C `);const a=document.getElementById("weather-anomalies");t.length>0?a.innerHTML="<div class='myList'><ul class='anomaly-list'>"+t.map((e=>`<li>${e}</li>`)).join("")+"</ul></div>":a.innerHTML+="<p>No anomalies detected.</p>"}function showImage(){document.getElementById("weather-icon").style.display="block"}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("loginForm"),t=document.getElementById("logoutBtn"),n=document.getElementById("results");n&&(n.style.display="none"),e&&e.addEventListener("submit",(function(e){e.preventDefault();const t=document.getElementById("username").value,n=document.getElementById("password").value;"admin"===t&&"password"===n?(localStorage.setItem("isLoggedIn","true"),window.location.href="dashboard.html"):document.getElementById("error-message").textContent="Invalid username or password!"})),t&&t.addEventListener("click",(function(){localStorage.removeItem("isLoggedIn"),window.location.href="index.html"}))}));